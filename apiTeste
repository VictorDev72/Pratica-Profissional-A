
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro - DaRoça</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #F3E9DC;
      color: #5E3023;
    }

    header {
            background-color: #E6CBA8;
            width: 100%;
            height: 100px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

          h1, h2, h3 {
              text-align: center;
        }

      .logo{
          width: 146px;
          height: 71px;
      }

      a {
          color: #5E3023;
          text-decoration: none;
          margin-left: 10px;
          margin-right: 10px;
      }

      .botao {
          color: #FFFDFD;
          background-color: #FF8C00;
          padding: 15px;
          border-radius: 5px;
      }

    .container {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 80vh;
      background: url("IMGS/CoracaoLegume.png") no-repeat right bottom;
      background-size: 800px;
      background-repeat: no-repeat; 
      background-position: center;  
    }

    .form-box {
      background-color: rgba(243, 233, 220, 0.95);
      padding: 30px 50px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      max-width: 500px;
      width: 100%;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      font-size: 2.2rem;
    }

    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
      margin-bottom: 5px;
    }

    input {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      outline: none;
    }

    input:focus {
      border-color: #5E3023;
    }

    .btn-submit {
      margin-top: 20px;
      width: 100%;
      background-color: #5E3023;
      color: white;
      font-size: 1rem;
      padding: 12px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
    }

    .btn-submit:hover {
      background-color: #3c1f15;
    }

    #end > div > label{
      font-size: small;
      width: 25%;
      padding: 10px;
      background-color: #E6CBA8;
      border-radius: 10px;
      margin: 5px 0px;
    }
    #end > div > input{
      margin: 0px 10px;
      width: 25%;
    }
    #end > div{
      display: flex;
    }
  </style>
</head>
<body>

  <header>
    <div>
            <a href="landing_page.html"><img class="logo" src="imagens/Logo_final.png" alt=""></a>
    </div>
    <div>
            <a href="produtos.html">Carrinho</a>
            <a href="landing_page.html">Sobre</a>
            <a href="PaginaCadastro.html">Cadastrar</a>
            <a href="PaginaLogin.html" class="botao">Entrar</a>
    </div>
  </header>

  <main class="container">
    <div class="form-box">
      <h1>Bem Vindo</h1>
      <form>
        <label for="nome">Nome</label>
        <input type="text" id="nome" placeholder="Ex: Victor">

        <label for="sobrenome">Sobrenome</label>
        <input type="text" id="sobrenome" placeholder="Ex: Fernandes">

        <label for="email">Email</label>
        <input type="email" id="email" placeholder="email@dominiofakedajane.net">

        <label for="celular">Celular com DDD</label>
        <input type="tel" id="celular" placeholder="(11)912345-678">

        <label for="cpf">CPF</label>
        <input type="text" id="cpf" placeholder="12345678900">

        <label for="endendereco">Endereço</label>
        <div id="end">
          <div>
            <label for="endendereco">Tipo:</label>
            <input type="text" id="tipo" placeholder="Ex: rua" class="endendereco">
          </div>
          <div>
            <label for="endendereco">Logradouro:</label>
            <input type="text" id="logradouro" placeholder="Ex: Aluizio de azedo" class="endendereco">
          </div>
          <div>
            <label for="endendereco">Numero:</label>
            <input type="int" id="numero" placeholder="Ex: 200" class="endendereco">
          </div>
          <div>
            <label for="endendereco">Complemento:</label>
              <input type="text" id="complemento" placeholder="Ex: 34" class="endendereco">
          </div>
          <div>
            <label for="endendereco">CEP:</label>
              <input type="int" id="cep" placeholder="Ex: 1234-567" class="endendereco">
          </div>

        </div>

        <label for="nac">Nacimento</label>
        <input type="date" id="nac" placeholder="Ex: 10/12/2000">
        
        <label for="senha">Senha</label>
        <input type="password" id="senha" placeholder="Ex: 123123">

        <button type="submit" class="btn-submit" onclick="addBD(event)">Cadastrar-se</button>
        <p id = 'resp'></p>
      </form>
    </div>
  </main>
  <script>
    async function addBD(event) {
      event.preventDefault();
      const url = 'http://localhost:8090/cadastro'

      const nome = document.getElementById('nome').value;
      const sobrenome = document.getElementById('sobrenome').value;
      const email = document.getElementById('email').value;
      const celular = document.getElementById('celular').value;
      const senha = document.getElementById('senha').value;
      const nac = document.getElementById('nac').value;
      const tipo = document.getElementById('tipo').value;
      const log = document.getElementById('logradouro').value;
      const num = document.getElementById('numero').value;
      const comp = document.getElementById('complemento').value;
      const cep = document.getElementById('cep').value;
      const cpf = document.getElementById('cpf').value;
      const resp = document.getElementById('resp');

      if (!nome || !email || !celular || !senha) {
        resp.innerText = "Preencha todos os campos.";
        resp.style.color = "red";
        return;
      }
  
      if (!email.includes("@") || !email.includes(".") || email.length < 5) {
        resp.innerText = "Email inválido.";
        resp.style.color = "red";
        return;
      }
  
      if (celular.length != 14 || !celular.includes("(") || !celular.includes("-")) {
        resp.innerText = "Celular inválido. Deve ser escrito nesse formato: (11)912345-678.";
        resp.style.color = "red";
        return;
      }
      
      if (cpf.length != 12) {
        resp.innerText = "Cpf inválido. Deve conter 12 dígitos numéricos.";
        resp.style.color = "red";
        return;
      }

      if (cep.length != 8 || !cep.includes("-")) {
        resp.innerText = "Cep inválido. Deve conter 7 dígitos numéricos e um traço ex: 1234-567.";
        resp.style.color = "red";
        return;
      }

      
      const options = {
          method: "POST",
          body: JSON.stringify({
            nome: nome,
            sobrenome: sobrenome,
            email: email,
            celular: celular,
            nascimento: nac,
            cpf: cpf,
            tipo: tipo,
            logradouro: log,
            numero: num,
            complemento: comp,
            cep: cep,
            senha: senha
          }),
          headers: { 'Content-type': 'application/json' },
      }
      
      try {
        const result = await fetch(url, options)
        if (result.ok) {
          console.log("Cadastro realizado com sucesso");
          resp.innerHTML = ('Cadastro realizado com sucesso');
          resp.style.color = 'green'

        }
        else {
          console.log("Erro de cadastro não valido ");
          resp.innerHTML = ('Erro de cadastro não valido');
          resp.style.color = 'red'
        }
      }
      catch (error) {
        console.error("Erro na inserção", error.message);
        resp.innerHTML = ("Erro na inserção");
        resp.style.color = 'red'
        

      }
    }

  </script>
</body>
</html>

